<!doctype html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="description" content="Your description goes here">
		<meta name="keywords" content="one, two, three">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- Title -->
		<title>My Stuff | Manage your things!</title>
		<!-- Bootstrap CSS -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
		<!-- Font -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
    <!-- Icons -->
    <script src="https://kit.fontawesome.com/41ed2c6bc1.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Custom CSS -->
		<link rel="stylesheet" href="/style.css">
    <!-- Heroko Prereq -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src *;
   img-src * 'self' data: https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' *;
   style-src  'self' 'unsafe-inline' *"> -->
   <meta http-equiv="Content-Security-Policy" 
   content="
     worker-src blob:; 
     child-src blob: gap:;
     img-src 'self' blob: data:;
     default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: gap: content:">
	</head>
	<body>
    <div class="container">
      <div class="title">
        <h1>Imari's Stuff</h1>
      </div>
      <div class="buttons">
        <button id="addItemPopupButton" type="button" class="addItemToggle btn btn-primary">Add Item</button>
      </div>
      <div class="addItemContainer">
        <div class="addItem">
          <p>Add new item:</p>
          <form action="/post" method="POST" enctype = "multipart/form-data">
            <div class="row">
              <input required type="text" placeholder="Title" name="title">
            </div>
            <div class="row small">
              <input required type="number" placeholder="Price" name="price">
              <input required type="text" placeholder="Brand" name="brand">
            </div>
            <div class="row small">
              <input required type="date" placeholder="Date Acquired" name="dateAcquired">
              <input required type="text" placeholder="Place Acquired" name="placeAcquired">
            </div>
            <div class="row small image">
              <i class="fa-solid fa-upload"></i>
              <label for="image">Upload image:</label>
              <input required type="file" name="image" id="image">
            </div>
            <div class="row">
              <fieldset>
                <legend>Tags</legend>
                <div class="options">
                  <div class="option">
                    <input type="checkbox" name="tags" value="tops" id="tops">
                    <label for="tops">Tops</label>
                  </div>
                  <div class="option">
                    <input type="checkbox" name="tags" value="bottoms" id="bottoms">
                    <label for="bottoms">Bottoms</label>
                  </div>
                  <div class="option">
                    <input type="checkbox" name="tags" value="footwears" id="footwears">
                    <label for="footwears">Footwears</label>
                  </div>
                  <div class="option">
                    <input type="checkbox" name="tags" value="bags" id="bags"> 
                    <label for="bags">Bags</label>
                  </div>
                  <div class="option">
                    <input type="checkbox" name="tags" value="dress" id="dress"> 
                    <label for="dress">Dress</label>
                  </div>
                  <div class="option">
                    <input type="checkbox" name="tags" value="supplies" id="supplies"> 
                    <label for="supplies">Supplies</label>
                  </div>
                  <div class="option">
                    <input type="checkbox" name="tags" value="electronics" id="electronics"> 
                    <label for="electronics">Electronics</label>
                  </div>
                  <div class="option">
                    <input type="checkbox" name="tags" value="others" id="others"> 
                    <label for="others">Others</label>
                  </div>
                </div>
              </fieldset>
            </div>
            <div class="row">
              <input type="submit" class="add" placeholder="Add item"></input>
              <button class="button addItemToggle" type="button">Cancel</input>
            </div>
          </form>
        </div>
      </div>
      <div class="filters">
        <button class="filter">All</button>
      </div>
      <div class="updateItem">
        <div class="bg"></div>
        <div class="form" action="/update" method="PUT">
          <p>Update item: </p>
          <div class="img">
            <img class="img-fluid" id="renderimage" src="#">
          </div>
          <input required type="text" placeholder="Title" name="title" id="updatetitle">
          <input required type="number" placeholder="Price" name="price" id="updateprice">
          <input required type="text" placeholder="Brand" name="brand" id="updatebrand">
          <input required type="date" placeholder="Date Acquired" name="dateAcquired" id="updatedateAcquired">
          <input required type="text" placeholder="Place Acquired" name="placeAcquired" id="updateplaceAcquired">
          <fieldset>
            <legend>Tags</legend>
            <div class="options">
              <div class="option">
                <input type="checkbox" name="tags" value="tops" id="updatetops">
                <label for="updatetops">Tops</label>
              </div>
              <div class="option">
                <input type="checkbox" name="tags" value="bottoms" id="updatebottoms">
                <label for="updatebottoms">Bottoms</label>
              </div>
              <div class="option">
                <input type="checkbox" name="tags" value="footwears" id="updatefootwears">
                <label for="updatefootwears">Footwears</label>
              </div>
              <div class="option">
                <input type="checkbox" name="tags" value="bags" id="updatebags"> 
                <label for="updatebags">Bags</label>
              </div>
              <div class="option">
                <input type="checkbox" name="tags" value="dress" id="updatedress"> 
                <label for="updatedress">Dress</label>
              </div>
              <div class="option">
                <input type="checkbox" name="tags" value="supplies" id="updatesupplies"> 
                <label for="updatesupplies">Supplies</label>
              </div>
              <div class="option">
                <input type="checkbox" name="tags" value="electronics" id="updateelectronics"> 
                <label for="updateelectronics">Electronics</label>
              </div>
              <div class="option">
                <input type="checkbox" name="tags" value="others" id="updateothers"> 
                <label for="updateothers">Others</label>
              </div>
            </div>
          </fieldset>
          <div class="row small image">
            <label for="image">Upload image:</label>
            <input required type="file" name="updateimage" id="updateimage">
          </div>
          <!-- <i class="fa-solid fa-circle-plus"></i> Add Item -->
          <input type="submit" class="updateSubmit" placeholder="Add item"></input>
        </div>
      </div>
      <div class="collection">
        <% for (var i = 0; i < items.length; i++) { %>
          <div class="item">
            <div class="img">
                <img src="uploads/images/<%= items[i].image %>">
            </div>
            <div class="info">
              <h3><%= items[i].title %></h3>
              <div class="details">
                <p><span class="detailsKey">Price: </span><span>Php <%= items[i].price %></span></p>
                <p><span class="detailsKey">Brand: </span><span><%= items[i].brand %></span></p>
                <p><span class="detailsKey">Date acquired: </span><span><%= items[i].dateAcquired %></span></p>
                <p><span class="detailsKey">Place acquired: </span><span><%= items[i].placeAcquired %></span></p>
                <p><span class="detailsKey">Tag: </span>
                  <span class="tags"><%= items[i].tags.join(', ') %></span>  
                </p>
              </div>
            </div>
            <div class="controls">
              <button class="update"><i class="fa-solid fa-pen-to-square"><span style = "display: none"><%= items[i].title %></span></i></button>
              <button class="delete"><i class="fa-solid fa-trash-can"><span style = "display: none"><%= items[i].title %></span></i></button>
            </div>
          </div> 
        <% } %>    
      </div>
    </div>


		<!-- Bootstrap JS -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
		<!-- Custom JS -->
		<script type="text/javascript" src="/main.js"></script>
	</body>
</html>